# Wallet API

–ü—Ä–æ—Å—Ç–æ–π REST API –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∏ —Å–Ω—è—Ç–∏—è —Å—Ä–µ–¥—Å—Ç–≤ —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∫–æ—à–µ–ª—å–∫–æ–≤.  
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Go —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL –∏ Docker.

---

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏)
- –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (`DEPOSIT`)
- –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ (`WITHDRAW`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –ø–æ ID –∫–æ—à–µ–ª—å–∫–∞
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –≤ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ (1000 RPS)

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Go 1.22** ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫
- **PostgreSQL** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **Docker / Docker Compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **pgx/v4** ‚Äî –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- **chi** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä HTTP
- **Clean Architecture** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ—ë–≤

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
/wallet-api
‚îú‚îÄ‚îÄ cmd
‚îÇ ‚îî‚îÄ‚îÄ main.go # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config
‚îÇ ‚îú‚îÄ‚îÄ config.go # –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞
‚îú‚îÄ‚îÄ internal
‚îÇ ‚îú‚îÄ‚îÄ api # HTTP –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
‚îÇ ‚îú‚îÄ‚îÄ domain # –î–æ–º–µ–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏ –∏ —Ç–∏–ø—ã
‚îÇ ‚îú‚îÄ‚îÄ service # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ ‚îî‚îÄ‚îÄ repository # –†–∞–±–æ—Ç–∞ —Å –ë–î —á–µ—Ä–µ–∑ pgx
‚îú‚îÄ‚îÄ migrations # SQL –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ config.env # –ö–æ–Ω—Ñ–∏–≥ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md
```

---

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/Kuzahka/wallet-api.git 
cd wallet-api
```

## –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
```
docker-compose --env-file config.env up --build
```

## –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```
docker-compose ps
```

## –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
```
docker-compose logs -f wallet-api
docker-compose logs -f postgres
```

## –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë
```
docker-compose down
```

## –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (DEPOSIT)
```
POST /api/v1/wallet
Content-Type: application/json
```
```
{
  "walletId": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
  "operationType": "DEPOSIT",
  "amount": 1000
}
```

## –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ (WITHDRAW)
```
POST /api/v1/wallet
Content-Type: application/json
```
```
{
  "walletId": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
  "operationType": "WITHDRAW",
  "amount": 500
}
```
## –ü–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞
```
GET /api/v1/wallets/a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8
```

## –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞
```
{
  "id": "a1b2c3d4-e5f6-7890-g1h2-i3j4k5l6m7n8",
  "balance": 1000
}
```
